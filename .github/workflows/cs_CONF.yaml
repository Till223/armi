name: cs_CONF

on: [push, pull_request]

jobs:
  search-for-improper-cs-access:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v2
      - name: Run grep
        run: grep -r -P "cs\[(?!CONF).*?\]" --include="*.py" --max-count=1 > grep_results.txt || true
      - name: Output results to console for debug purposes
        run: cat grep_results.txt
      - name: Evaluate results
        run: | 
            [[ -s grep_results.txt ]] && exit 1 || exit 0;